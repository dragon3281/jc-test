# è‡ªåŠ¨åŒ–æ•°æ®æ£€æµ‹å¹³å°

## é¡¹ç›®ç®€ä»‹

è‡ªåŠ¨åŒ–æ•°æ®æ£€æµ‹å¹³å°æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ä¸æ‰§è¡Œç³»ç»Ÿ,ç”¨äºæ‰¹é‡æ£€æµ‹è´¦å·åœ¨ç›®æ ‡ç½‘ç«™çš„æ³¨å†ŒçŠ¶æ€ã€‚ç³»ç»Ÿé€šè¿‡Webç•Œé¢ç»Ÿä¸€ç®¡ç†å¤šå°æœåŠ¡å™¨èµ„æºã€ä»£ç†IPæ± å’Œæ£€æµ‹ä»»åŠ¡,å®ç°é«˜å¹¶å‘ã€å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–æ£€æµ‹èƒ½åŠ›ã€‚

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **å¼€å‘è¯­è¨€**: Java 17
- **å¼€å‘æ¡†æ¶**: Spring Boot 3.2.x
- **ORMæ¡†æ¶**: MyBatis Plus 3.5.x
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis 7.0
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ 3.12.x
- **ä»»åŠ¡è°ƒåº¦**: Spring Task + Quartz
- **SSHå®¢æˆ·ç«¯**: JSch
- **Dockerå®¢æˆ·ç«¯**: docker-java 3.3.x
- **æµè§ˆå™¨è‡ªåŠ¨åŒ–**: Playwright 1.45.0

### å‰ç«¯æŠ€æœ¯
- **å¼€å‘æ¡†æ¶**: Vue 3
- **UIç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±ç®¡ç†**: Vue Router
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å›¾è¡¨åº“**: ECharts
- **æ„å»ºå·¥å…·**: Vite
- **å®æ—¶é€šä¿¡**: WebSocket (SockJS + STOMP)

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **æ•°æ®åº“åˆ†åŒº**: æŒ‰æœˆåˆ†åŒºç­–ç•¥
- **ç¼“å­˜ç­–ç•¥**: Rediså¤šçº§ç¼“å­˜

## ç³»ç»ŸåŠŸèƒ½æ¨¡å—

### 1. æœåŠ¡å™¨ç®¡ç†æ¨¡å—
- æœåŠ¡å™¨æ³¨å†Œä¸é…ç½®
- SSHè¿æ¥ç®¡ç†
- æœåŠ¡å™¨çŠ¶æ€ç›‘æ§(CPUã€å†…å­˜ã€ç£ç›˜)
- Dockerå®¹å™¨ç®¡ç†
- å¥åº·æ£€æŸ¥ä¸å¿ƒè·³æ£€æµ‹

### 2. ä»£ç†èµ„æºæ± æ¨¡å—
- ä»£ç†æ± åˆ†ç»„ç®¡ç†
- ä»£ç†èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥
- ä»£ç†å¥åº·åº¦è¯„åˆ†
- æ™ºèƒ½åˆ†é…ä¸è´Ÿè½½å‡è¡¡
- ä½¿ç”¨ç»Ÿè®¡ä¸ç›‘æ§

### 3. æ•°æ®ä¸­å¿ƒæ¨¡å—
- åŸºç¡€æ•°æ®å¯¼å…¥(æ”¯æŒExcel/CSV)
- æ£€æµ‹ç»“æœæŸ¥è¯¢ä¸å¯¼å‡º
- å†å²æ•°æ®è¿½æº¯
- æ•°æ®ç»Ÿè®¡ä¸åˆ†æ

### 4. ä¸šåŠ¡ä¸­å¿ƒæ¨¡å—
- **ç½‘ç«™åˆ†æ**
  - æ™ºèƒ½è¯†åˆ«æ³¨å†Œæ¥å£(æ”¯æŒæµè§ˆå™¨æ‹¦æˆªå’ŒJSé™æ€åˆ†æ)
  - å¤šå›½è¯­è¨€æ³¨å†ŒæŒ‰é’®è¯†åˆ«(13ç§è¯­è¨€)
  - åŠ å¯†æ–¹å¼è‡ªåŠ¨æ£€æµ‹
  - WebSocketå®æ—¶çŠ¶æ€æ¨é€
- **è‡ªåŠ¨åŒ–æ³¨å†Œ**(éªŒè¯ç å¤„ç†ã€Tokenæå–)
- **POSTæ¨¡æ¿ç®¡ç†**(æ¨¡æ¿ç”Ÿæˆã€æµ‹è¯•ã€ç‰ˆæœ¬ç®¡ç†)

### 5. æ£€æµ‹ä»»åŠ¡æ¨¡å—
- ä»»åŠ¡åˆ›å»ºä¸é…ç½®
- ä»»åŠ¡è°ƒåº¦ä¸åˆ†å‘
- å®æ—¶è¿›åº¦ç›‘æ§
- ä»»åŠ¡ç»“æœç»Ÿè®¡
- WebSocketå®æ—¶æ¨é€

## é¡¹ç›®ç»“æ„

```
jc-test/
â”œâ”€â”€ backend/                # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/com/detection/platform/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controller/      # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ service/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dao/             # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entity/          # å®ä½“ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dto/             # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ vo/              # è§†å›¾å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common/          # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ converter/       # å¯¹è±¡è½¬æ¢å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ manager/         # é€šç”¨ä¸šåŠ¡å°è£…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ scheduler/       # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚   â”‚       â”œâ”€â”€ application.yml  # åº”ç”¨é…ç½®
â”‚   â”‚   â”‚       â””â”€â”€ mapper/          # MyBatisæ˜ å°„æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ test/                    # æµ‹è¯•ä»£ç 
â”‚   â””â”€â”€ pom.xml                      # Mavené…ç½®
â”œâ”€â”€ frontend/               # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/     # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api/            # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ assets/         # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json        # npmé…ç½®
â”‚   â””â”€â”€ vite.config.js      # Viteé…ç½®
â”œâ”€â”€ docker/                 # Dockeré…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml  # Docker Composeé…ç½®
â”‚   â””â”€â”€ .env                # ç¯å¢ƒå˜é‡
â”œâ”€â”€ sql/                    # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ init.sql            # åˆå§‹åŒ–è„šæœ¬
â””â”€â”€ docs/                   # æ–‡æ¡£ç›®å½•
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: CentOS 9 / Rocky Linux 9 / AlmaLinux 9 / Ubuntu 20.04+ (æ¨è)
  - éœ€è¦ GLIBC 2.27+ ä»¥æ”¯æŒ Playwright æµè§ˆå™¨è‡ªåŠ¨åŒ–åŠŸèƒ½
  - CentOS 7 å¯è¿è¡Œä½†æµè§ˆå™¨åŠŸèƒ½ä¼šé™çº§åˆ°JSé™æ€åˆ†æ
- **JDK**: 17+
- **Node.js**: 16+
- **Maven**: 3.6+
- **Docker & Docker Compose**: ç”¨äºåŸºç¡€æœåŠ¡

### 1. å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
cd docker
docker-compose up -d
```

è¿™å°†å¯åŠ¨ä»¥ä¸‹æœåŠ¡:
- MySQL (ç«¯å£ 3306)
- Redis (ç«¯å£ 6379)
- RabbitMQ (ç«¯å£ 5672, ç®¡ç†ç•Œé¢ 15672)

### 2. å®‰è£… Playwright æµè§ˆå™¨é©±åŠ¨

**é‡è¦**: Playwright ç”¨äºçœŸå®æµè§ˆå™¨æ‹¦æˆªç½‘ç»œè¯·æ±‚ï¼Œè·å–å‡†ç¡®çš„æ³¨å†Œæ¥å£ä¿¡æ¯ã€‚

```bash
cd backend

# å®‰è£… Chromium æµè§ˆå™¨é©±åŠ¨
mvn exec:java -Dexec.mainClass=com.microsoft.playwright.CLI \
              -Dexec.args="install chromium"
```

**éªŒè¯å®‰è£…**:
```bash
# æ£€æŸ¥ GLIBC ç‰ˆæœ¬ (éœ€è¦ 2.27+)
ldd --version
```

å¦‚æœçœ‹åˆ°ç±»ä¼¼ `GLIBC_2.27 not found` é”™è¯¯ï¼Œè¯´æ˜ç³»ç»Ÿç‰ˆæœ¬è¿‡ä½ï¼Œå»ºè®®å‡çº§åˆ° CentOS 9 æˆ– Ubuntu 20.04+ã€‚

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
mvn clean package -DskipTests
java -jar target/detection-platform-1.0.0.jar

# æˆ–ä½¿ç”¨ Maven ç›´æ¥è¿è¡Œ
mvn spring-boot:run
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8080/api` å¯åŠ¨

**éªŒè¯æµè§ˆå™¨æ‹¦æˆªåŠŸèƒ½**:
```bash
# æŸ¥çœ‹æ—¥å¿—ï¼Œåº”è¯¥èƒ½çœ‹åˆ° [Browser] ç›¸å…³ä¿¡æ¯
tail -f backend/app.log | grep '\[Browser\]'

# æˆåŠŸæ—¶ä¼šæ˜¾ç¤º:
# [Browser] æ•è·æ³¨å†Œæ¥å£: https://example.com/api/register [POST]
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 5. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯åœ°å€: http://localhost:3000
- åç«¯API: http://localhost:8080/api
- RabbitMQç®¡ç†ç•Œé¢: http://localhost:15672 (ç”¨æˆ·å/å¯†ç : admin/admin)

é»˜è®¤ç®¡ç†å‘˜è´¦å·:
- ç”¨æˆ·å: admin
- å¯†ç : admin123

## æ•°æ®åº“è®¾è®¡

ç³»ç»ŸåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ•°æ®è¡¨:

1. **t_server** - æœåŠ¡å™¨è¡¨
2. **t_proxy_pool** - ä»£ç†æ± è¡¨
3. **t_proxy_node** - ä»£ç†èŠ‚ç‚¹è¡¨
4. **t_base_data** - åŸºç¡€æ•°æ®è¡¨
5. **t_post_template** - POSTæ¨¡æ¿è¡¨
6. **t_detection_task** - æ£€æµ‹ä»»åŠ¡è¡¨
7. **t_task_server** - ä»»åŠ¡æœåŠ¡å™¨å…³è”è¡¨
8. **t_detection_result** - æ£€æµ‹ç»“æœè¡¨(åˆ†åŒºè¡¨)
9. **t_user** - ç”¨æˆ·è¡¨

è¯¦ç»†çš„è¡¨ç»“æ„è¯·æŸ¥çœ‹ `sql/init.sql` æ–‡ä»¶ã€‚

## ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `docker/.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡:

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=detection_platform
DB_USER=root
DB_PASSWORD=123456

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# RabbitMQé…ç½®
MQ_HOST=localhost
MQ_PORT=5672
MQ_USER=admin
MQ_PASSWORD=admin

# JWTå¯†é’¥
JWT_SECRET=detection_platform_secret_key_2024

# åŠ å¯†å¯†é’¥
ENCRYPT_KEY=detection_encrypt_key_2024_32b
```

## æ–°å¢åŠŸèƒ½: Playwright æµè§ˆå™¨æ‹¦æˆª ğŸ‰

### åŠŸèƒ½æ¦‚è¿°
ç³»ç»Ÿç°å·²æ”¯æŒé€šè¿‡ **çœŸå®æµè§ˆå™¨** è‡ªåŠ¨åŒ–æ‹¦æˆªç½‘ç»œè¯·æ±‚æ¥åˆ†æç½‘ç«™æ³¨å†Œæµç¨‹ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„JSé™æ€åˆ†ææ›´åŠ å‡†ç¡®å¯é ã€‚

### æ ¸å¿ƒèƒ½åŠ›

#### 1. å¤šè¯­è¨€æ³¨å†ŒæŒ‰é’®è¯†åˆ«
ç³»ç»Ÿæ”¯æŒ **13ç§è¯­è¨€** çš„æ³¨å†ŒæŒ‰é’®è‡ªåŠ¨è¯†åˆ«ï¼š
- **ä¸­æ–‡**: æ³¨å†Œã€ç«‹å³æ³¨å†Œã€å…è´¹æ³¨å†Œ
- **è‹±æ–‡**: registerã€Registerã€REGISTERã€sign upã€Sign Upã€signup
- **å­ŸåŠ æ‹‰è¯­**: à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨
- **å°åœ°è¯­**: à¤¨à¤¿à¤¬à¤‚à¤§à¤¨
- **è¥¿ç­ç‰™è¯­**: registrarseã€registroã€Registrarseã€Registro
- **è‘¡è„ç‰™è¯­**: registroã€Registro
- **æ³•è¯­**: inscrireã€S'inscrire
- **ä¿„è¯­**: Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
- **é˜¿æ‹‰ä¼¯è¯­**: ØªØ³Ø¬ÙŠÙ„
- **æ—¥è¯­**: ç™»éŒ²ã€æ–°è¦ç™»éŒ²
- **éŸ©è¯­**: íšŒì›ê°€ì…
- **æ³°è¯­**: à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™
- **è¶Šå—è¯­**: Ä‘Äƒng kÃ½ã€ÄÄƒng kÃ½

#### 2. å·¥ä½œæµç¨‹
```
1. å¯åŠ¨æ— å¤´ Chromium æµè§ˆå™¨
2. è®¿é—®ç›®æ ‡ç½‘ç«™
3. ç›‘å¬æ‰€æœ‰ç½‘ç»œè¯·æ±‚ (Page.onRequest)
4. è‡ªåŠ¨æŸ¥æ‰¾å¹¶ç‚¹å‡»æ³¨å†ŒæŒ‰é’®
5. æ•è·åŒ…å« register/signup å…³é”®è¯çš„ API è¯·æ±‚
6. è®°å½•çœŸå®çš„ URL å’Œ HTTP æ–¹æ³•
7. å¦‚æœæµè§ˆå™¨å¤±è´¥ï¼Œè‡ªåŠ¨é™çº§åˆ° JS é™æ€åˆ†æ
```

#### 3. é™çº§ç­–ç•¥
ç³»ç»Ÿå®ç°äº†æ™ºèƒ½é™çº§æœºåˆ¶ï¼š
- âœ… **ä¼˜å…ˆçº§1**: æµè§ˆå™¨çœŸå®æ‹¦æˆª (æœ€å‡†ç¡®)
- âœ… **ä¼˜å…ˆçº§2**: JS é™æ€åˆ†æ (å…œåº•æ–¹æ¡ˆ)
- âœ… ä¿è¯åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œ

#### 4. WebSocket å®æ—¶æ¨é€
- å‰ç«¯è‡ªåŠ¨è®¢é˜…åˆ†æä»»åŠ¡çŠ¶æ€: `/topic/analysis/{analysisId}`
- åˆ†æå®Œæˆåè‡ªåŠ¨æ›´æ–°é¡µé¢ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
- å®æ—¶æ˜¾ç¤ºåˆ†æè¿›åº¦å’Œç»“æœ

### ä½¿ç”¨ç¤ºä¾‹

**å‰ç«¯æ“ä½œ**:
1. è¿›å…¥ "ä¸šåŠ¡ä¸­å¿ƒ" â†’ "è‡ªåŠ¨åŒ–æ³¨å†Œåˆ†æ"
2. ç‚¹å‡» "æ–°å¢åˆ†æ"ï¼Œè¾“å…¥ç›®æ ‡ç½‘ç«™URL
3. ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œæµè§ˆå™¨æ‹¦æˆªåˆ†æ
4. é¡µé¢å®æ—¶æ˜¾ç¤ºåˆ†æçŠ¶æ€å’Œç»“æœ

**æŸ¥çœ‹æ—¥å¿—**:
```bash
# ç›‘æ§æµè§ˆå™¨æ‹¦æˆªæ´»åŠ¨
tail -f backend/app.log | grep -E '\[Browser\]|Playwright|æ•è·æ³¨å†Œæ¥å£'

# æˆåŠŸç¤ºä¾‹:
# [Browser] æ•è·æ³¨å†Œæ¥å£: https://example.com/api/register [POST]
# [Browser] æ£€æµ‹åˆ°åŠ å¯†æ–¹å¼: AES-CBC
```

### ç¯å¢ƒè¦æ±‚

| æ“ä½œç³»ç»Ÿ | GLIBCç‰ˆæœ¬ | Playwrightæ”¯æŒ | æ¨èåº¦ |
|---------|----------|---------------|-------|
| CentOS 9 / Rocky Linux 9 | 2.28+ | âœ… å®Œå…¨æ”¯æŒ | â­â­â­â­â­ |
| Ubuntu 20.04+ | 2.31+ | âœ… å®Œå…¨æ”¯æŒ | â­â­â­â­â­ |
| CentOS 8 | 2.28+ | âœ… å®Œå…¨æ”¯æŒ | â­â­â­â­ |
| CentOS 7.9 | 2.17 | âš ï¸ é™çº§åˆ°JSåˆ†æ | â­â­ |

### æ•…éšœæ’æŸ¥

**é—®é¢˜1: GLIBC ç‰ˆæœ¬é”™è¯¯**
```bash
# é”™è¯¯ä¿¡æ¯
GLIBC_2.27 not found
GLIBC_2.28 not found

# è§£å†³æ–¹æ¡ˆ
1. å‡çº§åˆ° CentOS 9 æˆ– Ubuntu 20.04+
2. æˆ–æ¥å—é™çº§åˆ° JS é™æ€åˆ†æ (ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†)
```

**é—®é¢˜2: æµè§ˆå™¨æ‹¦æˆªå¤±è´¥**
```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f backend/app.log | grep '\[Browser\]'

# å¦‚æœçœ‹åˆ° "æµè§ˆå™¨æ‹¦æˆªå¤±è´¥ï¼Œä½¿ç”¨JSåˆ†æ"
# è¯´æ˜é™çº§ç­–ç•¥å·²ç”Ÿæ•ˆï¼Œç³»ç»Ÿä»å¯æ­£å¸¸å·¥ä½œ
```

**é—®é¢˜3: Playwright é©±åŠ¨æœªå®‰è£…**
```bash
# é‡æ–°å®‰è£…æµè§ˆå™¨é©±åŠ¨
cd backend
mvn exec:java -Dexec.mainClass=com.microsoft.playwright.CLI \
              -Dexec.args="install chromium"
```

### ç›¸å…³æ–‡ä»¶

**åç«¯æ ¸å¿ƒæ–‡ä»¶**:
- `backend/pom.xml` - Playwright ä¾èµ–é…ç½®
- `backend/src/main/java/com/detection/platform/service/SmartWebAnalyzer.java` - æµè§ˆå™¨æ‹¦æˆªé€»è¾‘
- `backend/src/main/java/com/detection/platform/service/impl/WebsiteAnalysisServiceImpl.java` - WebSocket æ¨é€

**å‰ç«¯æ ¸å¿ƒæ–‡ä»¶**:
- `frontend/src/utils/websocket.js` - WebSocket å®¢æˆ·ç«¯å·¥å…·ç±»
- `frontend/src/views/business/AnalysisRegister.vue` - åˆ†æé¡µé¢ (å®æ—¶æ›´æ–°)
- `frontend/package.json` - WebSocket ä¾èµ– (sockjs-client, stompjs)

---

## æ ¸å¿ƒç‰¹æ€§

### 1. åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦
- æ”¯æŒå¤šæœåŠ¡å™¨å¹¶å‘æ‰§è¡Œ
- ä»»åŠ¡è‡ªåŠ¨æ‹†åˆ†ä¸åˆ†é…
- å¤±è´¥è‡ªåŠ¨é‡è¯•æœºåˆ¶

### 2. æ™ºèƒ½ä»£ç†ç®¡ç†
- ä»£ç†å¥åº·åº¦è¯„åˆ†ç³»ç»Ÿ
- è‡ªåŠ¨è´Ÿè½½å‡è¡¡
- ä»£ç†æ± åŠ¨æ€åˆ‡æ¢

### 3. å®æ—¶ç›‘æ§
- WebSocketå®æ—¶è¿›åº¦æ¨é€
- æœåŠ¡å™¨çŠ¶æ€å®æ—¶ç›‘æ§
- ä»»åŠ¡æ‰§è¡Œæƒ…å†µå¯è§†åŒ–

### 4. æ•°æ®å®‰å…¨
- SSHå¯†ç /å¯†é’¥AES-256åŠ å¯†
- JWT Tokenè®¤è¯
- æ“ä½œæ—¥å¿—å®¡è®¡

### 5. é«˜æ€§èƒ½ä¼˜åŒ–
- Rediså¤šçº§ç¼“å­˜
- æ•°æ®åº“åˆ†åŒºç­–ç•¥
- å¼‚æ­¥ä»»åŠ¡å¤„ç†
- æ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°å¡«è°·

## å¼€å‘é˜¶æ®µè§„åˆ’

### ç¬¬ä¸€é˜¶æ®µ:åŸºç¡€è®¾æ–½æ­å»º âœ…
- [x] åç«¯Spring Booté¡¹ç›®ç»“æ„
- [x] å‰ç«¯Vue3é¡¹ç›®ç»“æ„
- [x] Docker Composeé…ç½®
- [x] æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

### ç¬¬äºŒé˜¶æ®µ:åç«¯æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- [ ] å®ä½“ç±»å’ŒDTO/VOå¯¹è±¡
- [ ] æœåŠ¡å™¨ç®¡ç†æ¨¡å—
- [ ] ä»£ç†èµ„æºæ± æ¨¡å—
- [ ] POSTæ¨¡æ¿ç®¡ç†æ¨¡å—
- [ ] æ•°æ®ä¸­å¿ƒæ¨¡å—

### ç¬¬ä¸‰é˜¶æ®µ:å‰ç«¯æ ¸å¿ƒé¡µé¢å¼€å‘
- [ ] ä¸»å¸ƒå±€å’Œè·¯ç”±é…ç½®
- [ ] ä»ªè¡¨ç›˜é¡µé¢
- [ ] æœåŠ¡å™¨ç®¡ç†é¡µé¢
- [ ] ä»£ç†èµ„æºæ± é¡µé¢

### ç¬¬å››é˜¶æ®µ:ä»»åŠ¡è°ƒåº¦åŠŸèƒ½å¼€å‘
- [ ] ä»»åŠ¡ç®¡ç†åç«¯æ¨¡å—
- [ ] ä»»åŠ¡è°ƒåº¦æœåŠ¡
- [ ] ä»»åŠ¡ç›¸å…³å‰ç«¯é¡µé¢

### ç¬¬äº”é˜¶æ®µ:æµ‹è¯•ä¸éƒ¨ç½²
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## CentOS 9 å®Œæ•´éƒ¨ç½²æŒ‡å—

### ç³»ç»Ÿå‡†å¤‡

```bash
# 1. æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬
cat /etc/os-release
# åº”æ˜¾ç¤º: CentOS Linux 9 æˆ– Rocky Linux 9

# 2. éªŒè¯ GLIBC ç‰ˆæœ¬
ldd --version
# åº”æ˜¾ç¤º: ldd (GNU libc) 2.28 æˆ–æ›´é«˜

# 3. å®‰è£…åŸºç¡€ä¾èµ–
sudo yum update -y
sudo yum install -y git wget curl
```

### å®‰è£… Java 17

```bash
# å®‰è£… OpenJDK 17
sudo yum install -y java-17-openjdk java-17-openjdk-devel

# éªŒè¯å®‰è£…
java -version
# åº”æ˜¾ç¤º: openjdk version "17.x.x"

# è®¾ç½® JAVA_HOME
echo 'export JAVA_HOME=/usr/lib/jvm/java-17-openjdk' >> ~/.bashrc
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### å®‰è£… Maven

```bash
# ä¸‹è½½ Maven 3.9.x
wget https://dlcdn.apache.org/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.tar.gz
tar -xzf apache-maven-3.9.5-bin.tar.gz
sudo mv apache-maven-3.9.5 /opt/maven

# é…ç½®ç¯å¢ƒå˜é‡
echo 'export MAVEN_HOME=/opt/maven' >> ~/.bashrc
echo 'export PATH=$MAVEN_HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc

# éªŒè¯å®‰è£…
mvn -v
```

### å®‰è£… Node.js

```bash
# å®‰è£… NodeSource ä»“åº“
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -

# å®‰è£… Node.js
sudo yum install -y nodejs

# éªŒè¯å®‰è£…
node -v
npm -v
```

### å…‹éš†é¡¹ç›®

```bash
# é…ç½® Git SSH å¯†é’¥ (å¦‚æœå°šæœªé…ç½®)
ssh-keygen -t ed25519 -C "your_email@example.com"
cat ~/.ssh/id_ed25519.pub
# å°†å…¬é’¥æ·»åŠ åˆ° GitHub Settings -> SSH Keys

# å…‹éš†é¡¹ç›®
git clone git@github.com:dragon3281/-.git
cd jc-test
```

### å¯åŠ¨åŸºç¡€æœåŠ¡ (Docker)

```bash
# å®‰è£… Docker
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install -y docker-ce docker-ce-cli containerd.io
sudo systemctl start docker
sudo systemctl enable docker

# å®‰è£… Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.23.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# å¯åŠ¨åŸºç¡€æœåŠ¡
cd docker
sudo docker-compose up -d

# éªŒè¯æœåŠ¡çŠ¶æ€
sudo docker-compose ps
```

### é…ç½®æ•°æ®åº“

```bash
# ç­‰å¾… MySQL å¯åŠ¨å®Œæˆ
sleep 30

# å¯¼å…¥åˆå§‹åŒ–è„šæœ¬
sudo docker exec -i jc-mysql mysql -uroot -p123456 < ../sql/init.sql

# éªŒè¯æ•°æ®åº“
sudo docker exec -it jc-mysql mysql -uroot -p123456 -e "SHOW DATABASES;"
```

### å®‰è£… Playwright æµè§ˆå™¨

```bash
cd ../backend

# å®‰è£… Chromium æµè§ˆå™¨é©±åŠ¨
mvn exec:java -Dexec.mainClass=com.microsoft.playwright.CLI \
              -Dexec.args="install chromium"

# éªŒè¯å®‰è£…æˆåŠŸ (åº”æ—  GLIBC é”™è¯¯)
```

### å¯åŠ¨åç«¯æœåŠ¡

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean package -DskipTests

# å¯åŠ¨æœåŠ¡ (åå°è¿è¡Œ)
nohup java -jar target/detection-platform-1.0.0.jar > app.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f app.log

# éªŒè¯å¯åŠ¨æˆåŠŸ (çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯)
# Started DetectionPlatformApplication in X seconds
```

### å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd ../frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (åå°è¿è¡Œ)
nohup npm run dev > dev.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f dev.log

# éªŒè¯å¯åŠ¨æˆåŠŸ (çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯)
# VITE ready in X ms
# Local: http://localhost:3000/
```

### éªŒè¯ç³»ç»ŸåŠŸèƒ½

```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8080/api/health  # åç«¯å¥åº·æ£€æŸ¥
curl http://localhost:3000              # å‰ç«¯è®¿é—®

# 2. éªŒè¯æµè§ˆå™¨æ‹¦æˆªåŠŸèƒ½
tail -f ../backend/app.log | grep '\[Browser\]'

# 3. åœ¨å‰ç«¯åˆ›å»ºä¸€ä¸ªåˆ†æä»»åŠ¡ï¼Œè§‚å¯Ÿæ—¥å¿—è¾“å‡º
# åº”è¯¥çœ‹åˆ°:
# [Browser] æ•è·æ³¨å†Œæ¥å£: https://xxx.com/api/register [POST]
```

### é˜²ç«å¢™é…ç½® (å¦‚æœéœ€è¦å¤–ç½‘è®¿é—®)

```bash
# å¼€æ”¾ç«¯å£
sudo firewall-cmd --permanent --add-port=3000/tcp  # å‰ç«¯
sudo firewall-cmd --permanent --add-port=8080/tcp  # åç«¯
sudo firewall-cmd --reload

# éªŒè¯é˜²ç«å¢™è§„åˆ™
sudo firewall-cmd --list-ports
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®

```bash
# 1. ä½¿ç”¨ systemd ç®¡ç†æœåŠ¡
sudo tee /etc/systemd/system/detection-backend.service > /dev/null <<EOF
[Unit]
Description=Detection Platform Backend
After=network.target

[Service]
Type=simple
User=detection
WorkingDirectory=/opt/jc-test/backend
ExecStart=/usr/bin/java -jar target/detection-platform-1.0.0.jar
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start detection-backend
sudo systemctl enable detection-backend

# 2. ä½¿ç”¨ Nginx åå‘ä»£ç†
# 3. é…ç½® SSL è¯ä¹¦
# 4. è®¾ç½®æ—¥å¿—è½®è½¬
# 5. é…ç½®å®šæ—¶å¤‡ä»½
```

---

## æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: ç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç å’Œå¯†é’¥
2. **æ€§èƒ½**: æ ¹æ®å®é™…ä¸šåŠ¡é‡è°ƒæ•´å¹¶å‘æ•°å’ŒæœåŠ¡å™¨èµ„æº
3. **ç›‘æ§**: å®šæœŸæ£€æŸ¥æ—¥å¿—å’Œç›‘æ§æŒ‡æ ‡
4. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé‡è¦é…ç½®æ–‡ä»¶
5. **ç³»ç»Ÿç‰ˆæœ¬**: å¼ºçƒˆæ¨èä½¿ç”¨ CentOS 9 æˆ– Ubuntu 20.04+ ä»¥è·å¾—å®Œæ•´çš„æµè§ˆå™¨æ‹¦æˆªåŠŸèƒ½

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**æ³¨æ„**: æœ¬ç³»ç»Ÿå·²å®ŒæˆåŸºç¡€æ¶æ„æ­å»º,åŒ…æ‹¬é¡¹ç›®ç»“æ„ã€é…ç½®æ–‡ä»¶å’Œæ•°æ®åº“è®¾è®¡ã€‚åç»­åŠŸèƒ½æ¨¡å—å¼€å‘ä¸­,æ¬¢è¿å‚ä¸è´¡çŒ®!
