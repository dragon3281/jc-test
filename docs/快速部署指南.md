# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

> **ç›®æ ‡**: 10åˆ†é’Ÿå†…å®Œæˆé¡¹ç›®éƒ¨ç½²å¹¶å¯åŠ¨  
> **éš¾åº¦**: â­â­ (ç®€å•)  
> **é€‚ç”¨åœºæ™¯**: å¿«é€Ÿä½“éªŒã€å¼€å‘æµ‹è¯•

---

## ğŸš€ æ–¹å¼ä¸€: ä¸€é”®éƒ¨ç½²(æ¨è)

### å‰ç½®æ¡ä»¶

- **æ“ä½œç³»ç»Ÿ**: CentOS 7+, RHEL 7+, Ubuntu 18+
- **æƒé™**: rootæˆ–sudoæƒé™
- **ç½‘ç»œ**: å¯è®¿é—®äº’è”ç½‘

### æ­¥éª¤1: å®‰è£…ä¾èµ–(çº¦5åˆ†é’Ÿ)

```bash
cd /root/jc-test

# è¿è¡Œä¾èµ–å®‰è£…è„šæœ¬(è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…æ‰€æœ‰ä¾èµ–)
sudo ./install-deps.sh
```

**è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…**:
- âœ… JDK 17
- âœ… Maven 3.9.5
- âœ… Node.js 18
- âœ… Docker
- âœ… Docker Compose

**å®‰è£…è¿‡ç¨‹**:
```
==========================================
è‡ªåŠ¨åŒ–æ•°æ®æ£€æµ‹å¹³å° - ä¾èµ–å®‰è£…
==========================================

[INFO] æ£€æµ‹åˆ°æ“ä½œç³»ç»Ÿ: centos 7
[INFO] å¼€å§‹å®‰è£…ä¾èµ–è½¯ä»¶...

[INFO] æ£€æŸ¥JDKå®‰è£…çŠ¶æ€...
[SUCCESS] JDK 17å®‰è£…å®Œæˆ

[INFO] æ£€æŸ¥Mavenå®‰è£…çŠ¶æ€...
[SUCCESS] Mavenå®‰è£…å®Œæˆ

[INFO] æ£€æŸ¥Node.jså®‰è£…çŠ¶æ€...
[SUCCESS] Node.jså®‰è£…å®Œæˆ

[INFO] æ£€æŸ¥Dockerå®‰è£…çŠ¶æ€...
[SUCCESS] Dockerå®‰è£…å®Œæˆ

[INFO] æ£€æŸ¥Docker Composeå®‰è£…çŠ¶æ€...
[SUCCESS] Docker Composeå®‰è£…å®Œæˆ

==========================================
ä¾èµ–å®‰è£…å®Œæˆ
==========================================
```

### æ­¥éª¤2: ä¸€é”®å¯åŠ¨(çº¦3åˆ†é’Ÿ)

```bash
# è¿è¡Œå¯åŠ¨è„šæœ¬
./start.sh
```

**å¯åŠ¨è¿‡ç¨‹**:
```
==========================================
è‡ªåŠ¨åŒ–æ•°æ®æ£€æµ‹å¹³å° - ä¸€é”®å¯åŠ¨
==========================================

[INFO] æ­¥éª¤ 1/6: å¯åŠ¨åŸºç¡€æœåŠ¡(MySQL, Redis, RabbitMQ)...
âœ“ MySQLå¯åŠ¨æˆåŠŸ
âœ“ Rediså¯åŠ¨æˆåŠŸ
âœ“ RabbitMQå¯åŠ¨æˆåŠŸ

[INFO] æ­¥éª¤ 2/6: ç­‰å¾…MySQLå®Œå…¨å¯åŠ¨(30ç§’)...

[INFO] æ­¥éª¤ 3/6: åˆå§‹åŒ–æ•°æ®åº“...
âœ“ æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ,å…±åˆ›å»º11å¼ è¡¨

[INFO] æ­¥éª¤ 4/6: ç¼–è¯‘å¹¶å¯åŠ¨åç«¯æœåŠ¡...
âœ“ åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ (ç«¯å£8080)

[INFO] æ­¥éª¤ 5/6: å®‰è£…å‰ç«¯ä¾èµ–...
âœ“ å‰ç«¯ä¾èµ–å®‰è£…å®Œæˆ

[INFO] æ­¥éª¤ 6/6: å¯åŠ¨å‰ç«¯æœåŠ¡...
âœ“ å‰ç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ (ç«¯å£3000)

==========================================
å¯åŠ¨å®Œæˆ!
==========================================

è®¿é—®åœ°å€:
  å‰ç«¯: http://localhost:3000
  è´¦å·: admin
  å¯†ç : admin123

ç®¡ç†ç•Œé¢:
  RabbitMQ: http://localhost:15672 (admin/admin)
```

### æ­¥éª¤3: è®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨,è®¿é—® `http://localhost:3000`

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

---

## ğŸ“¦ æ–¹å¼äºŒ: Docker Composeéƒ¨ç½²

### ä¼˜ç‚¹
- âœ… ç¯å¢ƒéš”ç¦»,ä¸æ±¡æŸ“ç³»ç»Ÿ
- âœ… ä¸€æ¡å‘½ä»¤å¯åŠ¨æ‰€æœ‰æœåŠ¡
- âœ… é€‚åˆç”Ÿäº§ç¯å¢ƒ

### å‰ç½®æ¡ä»¶

åªéœ€å®‰è£…Dockerå’ŒDocker Compose:

```bash
# è¿è¡Œä¾èµ–å®‰è£…è„šæœ¬
cd /root/jc-test
sudo ./install-deps.sh
```

### æ­¥éª¤1: å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
cd /root/jc-test/docker

# å¯åŠ¨MySQLã€Redisã€RabbitMQ
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

**é¢„æœŸè¾“å‡º**:
```
NAME                COMMAND                  SERVICE             STATUS              PORTS
detection-mysql     "docker-entrypoint.sâ€¦"   mysql               Up 10 seconds       0.0.0.0:3306->3306/tcp
detection-redis     "docker-entrypoint.sâ€¦"   redis               Up 10 seconds       0.0.0.0:6379->6379/tcp
detection-rabbitmq  "docker-entrypoint.sâ€¦"   rabbitmq            Up 10 seconds       0.0.0.0:15672->15672/tcp
```

### æ­¥éª¤2: åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç­‰å¾…MySQLå®Œå…¨å¯åŠ¨(çº¦30ç§’)
sleep 30

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
docker exec -i detection-mysql mysql -uroot -p123456 detection_platform < /root/jc-test/sql/init.sql

# éªŒè¯æ•°æ®åº“
docker exec -it detection-mysql mysql -uroot -p123456 -e "USE detection_platform; SHOW TABLES;"
```

**é¢„æœŸè¾“å‡º**: æ˜¾ç¤º11å¼ è¡¨
```
+--------------------------------+
| Tables_in_detection_platform   |
+--------------------------------+
| t_base_data                    |
| t_detection_result             |
| t_detection_task               |
| t_post_template                |
| t_proxy_node                   |
| t_proxy_pool                   |
| t_register_task                |
| t_server                       |
| t_task_server                  |
| t_user                         |
| t_website_analysis             |
+--------------------------------+
```

### æ­¥éª¤3: å¯åŠ¨åç«¯

```bash
cd /root/jc-test/backend

# ç¼–è¯‘å¹¶è¿è¡Œ
mvn clean install
mvn spring-boot:run

# æˆ–åå°è¿è¡Œ
nohup mvn spring-boot:run > /dev/null 2>&1 &
```

**éªŒè¯åç«¯å¯åŠ¨**:
```bash
curl http://localhost:8080/api/user/login
# é¢„æœŸè¿”å›JSONå“åº”
```

### æ­¥éª¤4: å¯åŠ¨å‰ç«¯

```bash
cd /root/jc-test/frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

**è®¿é—®ç³»ç»Ÿ**: http://localhost:3000

---

## ğŸ”§ æ–¹å¼ä¸‰: æ‰‹åŠ¨éƒ¨ç½²(å®Œå…¨æ§åˆ¶)

### æ­¥éª¤1: å®‰è£…MySQL 8.0

**CentOS/RHEL**:
```bash
# æ·»åŠ MySQLä»“åº“
sudo yum install -y https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm

# å®‰è£…MySQL
sudo yum install -y mysql-community-server

# å¯åŠ¨MySQL
sudo systemctl start mysqld
sudo systemctl enable mysqld

# è·å–ä¸´æ—¶å¯†ç 
sudo grep 'temporary password' /var/log/mysqld.log

# ç™»å½•å¹¶ä¿®æ”¹å¯†ç 
mysql -uroot -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'YourPassword123!';
CREATE DATABASE detection_platform DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;

# å¯¼å…¥æ•°æ®åº“
mysql -uroot -p detection_platform < /root/jc-test/sql/init.sql
```

**Ubuntu/Debian**:
```bash
sudo apt-get update
sudo apt-get install -y mysql-server

sudo systemctl start mysql
sudo systemctl enable mysql

# è®¾ç½®rootå¯†ç 
sudo mysql
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'YourPassword123!';
CREATE DATABASE detection_platform DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;

# å¯¼å…¥æ•°æ®åº“
mysql -uroot -p detection_platform < /root/jc-test/sql/init.sql
```

### æ­¥éª¤2: å®‰è£…Redis 7.0

```bash
# ä¸‹è½½å¹¶ç¼–è¯‘Redis
cd /opt
sudo wget https://download.redis.io/releases/redis-7.0.12.tar.gz
sudo tar -xzf redis-7.0.12.tar.gz
cd redis-7.0.12
sudo make
sudo make install

# åˆ›å»ºé…ç½®ç›®å½•
sudo mkdir -p /etc/redis
sudo cp redis.conf /etc/redis/

# å¯åŠ¨Redis
redis-server /etc/redis/redis.conf &

# éªŒè¯
redis-cli ping
# é¢„æœŸè¿”å›: PONG
```

### æ­¥éª¤3: å®‰è£…RabbitMQ 3.12

**CentOS/RHEL**:
```bash
# å®‰è£…Erlang
sudo yum install -y epel-release
sudo yum install -y erlang

# æ·»åŠ RabbitMQä»“åº“
sudo curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.rpm.sh | sudo bash

# å®‰è£…RabbitMQ
sudo yum install -y rabbitmq-server

# å¯åŠ¨RabbitMQ
sudo systemctl start rabbitmq-server
sudo systemctl enable rabbitmq-server

# å¯ç”¨ç®¡ç†æ’ä»¶
sudo rabbitmq-plugins enable rabbitmq_management

# åˆ›å»ºç®¡ç†å‘˜
sudo rabbitmqctl add_user admin admin
sudo rabbitmqctl set_user_tags admin administrator
sudo rabbitmqctl set_permissions -p / admin ".*" ".*" ".*"
```

### æ­¥éª¤4: ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `backend/src/main/resources/application.yml`:

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/detection_platform
    username: root
    password: YourPassword123!
  
  data:
    redis:
      host: localhost
      port: 6379
  
  rabbitmq:
    host: localhost
    port: 5672
    username: admin
    password: admin
```

### æ­¥éª¤5: å¯åŠ¨åº”ç”¨

**åç«¯**:
```bash
cd /root/jc-test/backend
mvn clean install
mvn spring-boot:run
```

**å‰ç«¯**:
```bash
cd /root/jc-test/frontend
npm install
npm run dev
```

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# MySQL
docker ps | grep mysql
# æˆ–
systemctl status mysqld

# Redis
docker ps | grep redis
# æˆ–
redis-cli ping

# RabbitMQ
docker ps | grep rabbitmq
# æˆ–
systemctl status rabbitmq-server

# åç«¯
netstat -tlnp | grep 8080
curl http://localhost:8080/api/user/login

# å‰ç«¯
netstat -tlnp | grep 3000
curl http://localhost:3000
```

### 2. è¿è¡ŒAPIæµ‹è¯•

```bash
cd /root/jc-test
./test-api.sh
```

**é¢„æœŸè¾“å‡º**:
```
==========================================
è‡ªåŠ¨åŒ–æ•°æ®æ£€æµ‹å¹³å° - å¿«é€Ÿæµ‹è¯•
==========================================

1. æ£€æŸ¥æœåŠ¡å¯åŠ¨çŠ¶æ€
-------------------------------------------
åç«¯æœåŠ¡ (8080ç«¯å£) ... âœ“ è¿è¡Œä¸­
å‰ç«¯æœåŠ¡ (3000ç«¯å£) ... âœ“ è¿è¡Œä¸­

2. æµ‹è¯•ç”¨æˆ·è®¤è¯æ¥å£
-------------------------------------------
æµ‹è¯• 1: ç”¨æˆ·ç™»å½• ... âœ“ é€šè¿‡ (HTTP 200)

3. æµ‹è¯•æœåŠ¡å™¨ç®¡ç†æ¥å£
-------------------------------------------
æµ‹è¯• 2: æœåŠ¡å™¨åˆ—è¡¨(åˆ†é¡µ) ... âœ“ é€šè¿‡ (HTTP 200)
æµ‹è¯• 3: æœåŠ¡å™¨åˆ—è¡¨(å…¨éƒ¨) ... âœ“ é€šè¿‡ (HTTP 200)

...

==========================================
æµ‹è¯•ç»“æœæ±‡æ€»
==========================================
æ€»æµ‹è¯•æ•°: 15
é€šè¿‡: 15
å¤±è´¥: 0

âœ“ æ‰€æœ‰æ¥å£æµ‹è¯•é€šè¿‡!
```

### 3. è®¿é—®ç³»ç»Ÿ

1. æ‰“å¼€æµè§ˆå™¨,è®¿é—® `http://localhost:3000`
2. è¾“å…¥è´¦å·: `admin` / `admin123`
3. æˆåŠŸç™»å½•,è¿›å…¥ä»ªè¡¨ç›˜

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**: å¯åŠ¨å¤±è´¥,æç¤ºç«¯å£å·²è¢«å ç”¨

**è§£å†³**:
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep 8080
netstat -tlnp | grep 3000
netstat -tlnp | grep 3306

# æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>

# æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£å·
```

### é—®é¢˜2: MySQLè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: åç«¯å¯åŠ¨å¤±è´¥,æç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³**:
```bash
# 1. æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨
docker ps | grep mysql
systemctl status mysqld

# 2. æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
mysql -h localhost -u root -p123456 -e "SELECT 1"

# 3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
mysql -h localhost -u root -p123456 -e "SHOW DATABASES;"

# 4. é‡æ–°åˆ›å»ºæ•°æ®åº“
mysql -h localhost -u root -p123456 -e "CREATE DATABASE detection_platform DEFAULT CHARACTER SET utf8mb4;"
mysql -h localhost -u root -p123456 detection_platform < /root/jc-test/sql/init.sql
```

### é—®é¢˜3: Mavenä¾èµ–ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**: mvn installå¤±è´¥,æç¤ºæ— æ³•ä¸‹è½½ä¾èµ–

**è§£å†³**:
```bash
# 1. é…ç½®é˜¿é‡Œäº‘é•œåƒ
mkdir -p ~/.m2
cat > ~/.m2/settings.xml << 'EOF'
<settings>
  <mirrors>
    <mirror>
      <id>aliyun</id>
      <mirrorOf>central</mirrorOf>
      <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
  </mirrors>
</settings>
EOF

# 2. æ¸…ç†å¹¶é‡æ–°ä¸‹è½½
rm -rf ~/.m2/repository
mvn clean install
```

### é—®é¢˜4: npmå®‰è£…å¤±è´¥

**ç—‡çŠ¶**: npm installæŠ¥é”™

**è§£å†³**:
```bash
# 1. åˆ‡æ¢npmé•œåƒ
npm config set registry https://registry.npmmirror.com

# 2. æ¸…ç†ç¼“å­˜
npm cache clean --force
rm -rf node_modules package-lock.json

# 3. é‡æ–°å®‰è£…
npm install
```

### é—®é¢˜5: å‰ç«¯é¡µé¢ç©ºç™½

**ç—‡çŠ¶**: æµè§ˆå™¨æ‰“å¼€åé¡µé¢ç©ºç™½

**è§£å†³**:
```bash
# 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
# æŒ‰F12,æŸ¥çœ‹Consoleé”™è¯¯

# 2. æ£€æŸ¥APIä»£ç†é…ç½®
# ç¼–è¾‘ frontend/vite.config.js
# ç¡®è®¤proxyé…ç½®æ­£ç¡®:
# proxy: {
#   '/api': {
#     target: 'http://localhost:8080'
#   }
# }

# 3. é‡å¯å‰ç«¯æœåŠ¡
npm run dev
```

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

**DockeræœåŠ¡ç®¡ç†**:
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯å•ä¸ªæœåŠ¡
docker-compose restart mysql
```

**åç«¯æœåŠ¡**:
```bash
# å¼€å‘æ¨¡å¼
mvn spring-boot:run

# æ‰“åŒ…
mvn clean package -DskipTests

# è¿è¡ŒJAR
java -jar target/detection-platform-1.0.0.jar

# åå°è¿è¡Œ
nohup java -jar target/detection-platform-1.0.0.jar > /dev/null 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/detection-platform.log
```

**å‰ç«¯æœåŠ¡**:
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

### é»˜è®¤ç«¯å£

| æœåŠ¡ | ç«¯å£ | è®¿é—®åœ°å€ |
|------|-----|---------|
| å‰ç«¯ | 3000 | http://localhost:3000 |
| åç«¯API | 8080 | http://localhost:8080/api |
| MySQL | 3306 | localhost:3306 |
| Redis | 6379 | localhost:6379 |
| RabbitMQ | 5672 | localhost:5672 |
| RabbitMQç®¡ç† | 15672 | http://localhost:15672 |

### é»˜è®¤è´¦å·

**ç³»ç»Ÿç™»å½•**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

**RabbitMQç®¡ç†**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin`

**MySQL**:
- ç”¨æˆ·å: `root`
- å¯†ç : `123456` (Docker) / è‡ªå®šä¹‰å¯†ç  (æ‰‹åŠ¨å®‰è£…)

---

## ğŸ¯ ä¸‹ä¸€æ­¥

éƒ¨ç½²å®Œæˆå,æ‚¨å¯ä»¥:

1. **æŸ¥çœ‹å®Œæ•´æ–‡æ¡£**: `README-å®Œæ•´ç‰ˆ.md`
2. **å­¦ä¹ åŠŸèƒ½ä½¿ç”¨**: å‚è€ƒ"åŠŸèƒ½ä½¿ç”¨æ‰‹å†Œ"ç« èŠ‚
3. **æŸ¥çœ‹APIæ–‡æ¡£**: `docs/é¡¹ç›®æœ€ç»ˆå…¨é‡æ ¡éªŒæŠ¥å‘Š.md`
4. **è¿è¡Œæ€§èƒ½æµ‹è¯•**: æŸ¥çœ‹"æ€§èƒ½ä¼˜åŒ–è¯´æ˜"ç« èŠ‚

---

**éƒ¨ç½²å¸®åŠ©**: å¦‚é‡é—®é¢˜,è¯·æŸ¥çœ‹ `docs/æ ¡éªŒæ€»ç»“.md` çš„"å¸¸è§é—®é¢˜"ç« èŠ‚
