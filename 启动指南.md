# ğŸš€ é¡¹ç›®å¯åŠ¨æŒ‡å—

## å½“å‰çŠ¶æ€

âœ… Dockerå·²å®‰è£…å¹¶å¯åŠ¨
ğŸ”„ Docker Composeæ­£åœ¨åå°æ‹‰å–é•œåƒå¹¶å¯åŠ¨æœåŠ¡

## æ£€æŸ¥DockeræœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹Docker Composeæ—¥å¿—
tail -f /tmp/docker-compose.log

# æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨
docker ps

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
cd /root/jc-test/docker && docker compose ps
```

## å®Œæ•´å¯åŠ¨æ­¥éª¤

### 1. ç­‰å¾…åŸºç¡€æœåŠ¡å¯åŠ¨å®Œæˆï¼ˆçº¦5-10åˆ†é’Ÿï¼‰

```bash
# æ£€æŸ¥MySQLæ˜¯å¦å°±ç»ª
docker logs detection-mysql 2>&1 | grep "ready for connections"

# æ£€æŸ¥Redisæ˜¯å¦å°±ç»ª
docker logs detection-redis 2>&1 | grep "Ready to accept connections"

# æ£€æŸ¥RabbitMQæ˜¯å¦å°±ç»ª
docker logs detection-rabbitmq 2>&1 | grep "Server startup complete"
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç­‰å¾…MySQLå®Œå…¨å¯åŠ¨åæ‰§è¡Œ
sleep 30

# å¯¼å…¥æ•°æ®åº“
docker exec -i detection-mysql mysql -uroot -p123456 detection_platform < /root/jc-test/sql/init.sql

# éªŒè¯æ•°æ®åº“è¡¨
docker exec -it detection-mysql mysql -uroot -p123456 -e "USE detection_platform; SHOW TABLES;"
```

### 3. å®‰è£…Javaå’ŒMaven

**ç”±äºCentOS 7æ²¡æœ‰JDK 17çš„å®˜æ–¹åŒ…ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼š**

```bash
# ä¸‹è½½JDK 17ï¼ˆä½¿ç”¨åä¸ºé•œåƒï¼‰
cd /opt
wget https://repo.huaweicloud.com/java/jdk/17+35/jdk-17_linux-x64_bin.tar.gz

# è§£å‹
tar -xzf jdk-17_linux-x64_bin.tar.gz
mv jdk-17 /usr/local/

# é…ç½®ç¯å¢ƒå˜é‡
cat >> /etc/profile << 'JAVA_EOF'
export JAVA_HOME=/usr/local/jdk-17
export PATH=$JAVA_HOME/bin:$PATH
JAVA_EOF

source /etc/profile

# éªŒè¯
java -version
```

**å®‰è£…Mavenï¼š**

```bash
cd /opt
wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.tar.gz
tar -xzf apache-maven-3.9.5-bin.tar.gz

# é…ç½®ç¯å¢ƒå˜é‡
cat >> /etc/profile << 'MAVEN_EOF'
export MAVEN_HOME=/opt/apache-maven-3.9.5
export PATH=$MAVEN_HOME/bin:$PATH
MAVEN_EOF

source /etc/profile

# é…ç½®å›½å†…é•œåƒ
mkdir -p ~/.m2
cat > ~/.m2/settings.xml << 'SETTINGS_EOF'
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 
          http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <mirrors>
    <mirror>
      <id>aliyun</id>
      <mirrorOf>central</mirrorOf>
      <name>Aliyun Maven</name>
      <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
  </mirrors>
</settings>
SETTINGS_EOF

# éªŒè¯
mvn -version
```

### 4. å®‰è£…Node.js

```bash
# ä½¿ç”¨NodeSourceä»“åº“
curl -sL https://rpm.nodesource.com/setup_18.x | bash -
yum install -y nodejs

# é…ç½®npmå›½å†…é•œåƒ
npm config set registry https://registry.npmmirror.com

# éªŒè¯
node -v
npm -v
```

### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd /root/jc-test/backend

# ç¼–è¯‘å¹¶å¯åŠ¨
mvn clean install -DskipTests
mvn spring-boot:run

# æˆ–è€…æ‰“åŒ…åå¯åŠ¨
mvn clean package -DskipTests
nohup java -jar target/detection-platform-1.0.0.jar > /tmp/backend.log 2>&1 &
```

### 6. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd /root/jc-test/frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–åå°è¿è¡Œ
nohup npm run dev > /tmp/frontend.log 2>&1 &
```

### 7. è®¿é—®ç³»ç»Ÿ

- **å‰ç«¯åœ°å€**: http://localhost:3000
- **åç«¯API**: http://localhost:8080/api
- **RabbitMQç®¡ç†ç•Œé¢**: http://localhost:15672 (admin/admin)

**é»˜è®¤è´¦å·**:
- ç”¨æˆ·å: admin
- å¯†ç : admin123

## æ•…éšœæ’æŸ¥

### DockeræœåŠ¡æœªå¯åŠ¨

```bash
docker ps
# å¦‚æœå¤±è´¥ï¼Œé‡æ–°å¯åŠ¨ï¼š
cd /root/jc-test/docker
docker compose up -d
```

### MySQLè¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥MySQLçŠ¶æ€
docker logs detection-mysql

# é‡å¯MySQL
docker restart detection-mysql
```

### åç«¯å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f /root/jc-test/logs/detection-platform.log

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
docker exec -it detection-mysql mysql -uroot -p123456 -e "SELECT 1"
```

## æµ‹è¯•API

```bash
cd /root/jc-test
./test-api.sh
```

## æŸ¥çœ‹å®Œæ•´æ–‡æ¡£

- **å®Œæ•´ä½¿ç”¨æ‰‹å†Œ**: `README-å®Œæ•´ç‰ˆ.md`
- **å¿«é€Ÿéƒ¨ç½²æŒ‡å—**: `docs/å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md`
- **æ–‡æ¡£å¯¼èˆª**: `æ–‡æ¡£å¯¼èˆª.md`

